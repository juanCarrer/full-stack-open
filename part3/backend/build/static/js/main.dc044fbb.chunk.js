(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(17),o=t.n(r),i=(t(23),t(18)),u=t(8),s=t(3),d=t(5),j=t.n(d),b="https://blooming-earth-71059.herokuapp.com/api",l=t(0),h=function(e){var n=e.handleChange;return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{onChange:n})]})},f=function(e){var n=e.handleSubmit,t=e.handleName,c=e.name,a=e.handleNumber,r=e.number;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{onChange:t,value:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{onChange:a,value:r})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.persons,t=void 0===n?[]:n,c=e.updatePersons,a=function(e,n){window.confirm("delete ".concat(n," ?"))&&function(e){return j.a.delete("".concat(b,"/persons/").concat(e))}(e).then((function(n){c(t.filter((function(n){return n.id!==e})))})).catch((function(e){console.error(e)}))};return 0===t.length?Object(l.jsx)("h3",{children:"no persons Found..."}):Object(l.jsx)("div",{children:t.map((function(e){return Object(l.jsxs)("div",{children:[e.name," ",e.number,Object(l.jsx)("button",{onClick:function(){a(e.id,e.name)},children:"delete"})]},e.id)}))})},O=function(e){var n=e.message,t=e.error,c=void 0!==t&&t;return null===n?null:Object(l.jsx)("div",{className:"notification ".concat(c?"notification--error":"notification--ok"),children:Object(l.jsx)("b",{children:n})})},p=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(s.a)(r,2),d=o[0],p=o[1],v=Object(c.useState)(""),x=Object(s.a)(v,2),g=x[0],w=x[1],S=Object(c.useState)(""),k=Object(s.a)(S,2),y=k[0],C=k[1],N=Object(c.useState)([]),A=Object(s.a)(N,2),E=A[0],P=A[1],I=Object(c.useState)(null),J=Object(s.a)(I,2),B=J[0],D=J[1],F=Object(c.useState)(!1),M=Object(s.a)(F,2),T=M[0],U=M[1];Object(c.useEffect)((function(){j.a.get("".concat(b,"/persons")).then((function(e){a(e.data)})).catch((function(e){console.error(e)}))}),[]),Object(c.useEffect)((function(){if(0!==t.length&&Array.isArray(t)){var e=t.filter((function(e){return e.name.includes(y)}));P(e)}}),[t,y]);var q=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&U(!0),D(e),setTimeout((function(){D(null),U(!1)}),5e3)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(O,{message:B,error:T}),Object(l.jsx)(h,{handleChange:function(e){C(e.target.value)}}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(f,{handleSubmit:function(e){e.preventDefault();var n,c,r,o=t.find((function(e){return e.name===d}));if(o)return window.confirm("".concat(o.name," is already added to phonebook, replace the old number with a new one"))&&(n=o.id,c=Object(u.a)(Object(u.a)({},o),{},{number:g}),j.a.put("".concat(b,"/persons/").concat(n),c)).then((function(e){var n=e.data;console.log(n),q("Updated number of ".concat(n.name)),a(t.map((function(e){return e.id===n.id?n:e})))})).catch((function(e){q("Information of ".concat(o.name," has already been removed from server"),!0),a(t.filter((function(e){return e.id!==o.id})))})),p(""),void w("");(r={name:d,number:g},j.a.post("".concat(b,"/persons"),r)).then((function(e){q("Added ".concat(e.data.name)),a([].concat(Object(i.a)(t),[e.data]))})).catch((function(e){console.error(e)})),p(""),w("")},handleName:function(e){p(e.target.value)},name:d,handleNumber:function(e){w(e.target.value)},number:g}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(m,{persons:E,updatePersons:function(e){a(e)}})]})};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.dc044fbb.chunk.js.map